Metadata-Version: 2.4
Name: twiddle-dsl
Version: 1.0.0
Summary: Twiddle DSL - Decorators and types for Temporal workflow development
Author: Twiddle Team
License: Apache-2.0
Project-URL: Homepage, https://github.com/twiddle/twiddle-sdk
Project-URL: Documentation, https://github.com/twiddle/twiddle-sdk#readme
Project-URL: Repository, https://github.com/twiddle/twiddle-sdk
Keywords: temporal,workflow,dsl,twiddle
Classifier: Development Status :: 4 - Beta
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: Apache Software License
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Topic :: Software Development :: Libraries :: Python Modules
Classifier: Typing :: Typed
Requires-Python: >=3.9
Description-Content-Type: text/markdown
Provides-Extra: temporal
Requires-Dist: temporalio>=1.4.0; extra == "temporal"
Provides-Extra: dev
Requires-Dist: pytest>=7.0.0; extra == "dev"
Requires-Dist: pytest-asyncio>=0.21.0; extra == "dev"
Requires-Dist: black>=23.0.0; extra == "dev"
Requires-Dist: ruff>=0.1.0; extra == "dev"
Requires-Dist: mypy>=1.0.0; extra == "dev"

# Twiddle DSL

Decorators and types for building Temporal and Airflow workflows with the Twiddle visual workflow editor.

## Installation

```bash
pip install twiddle-dsl
```

For Temporal runtime support:

```bash
pip install twiddle-dsl[temporal]
```

For Airflow runtime support:

```bash
pip install twiddle-dsl[airflow]
```

## Quick Start

### Defining Activities

```python
from twiddle_dsl import activity, Parameter

@activity(
    name="Send Email",
    description="Sends an email to a recipient",
    category="Communications",
    icon="email"
)
async def send_email(
    recipient: Parameter[str] = Parameter(
        label="Recipient",
        description="Email address",
        required=True
    ),
    subject: Parameter[str] = Parameter(
        label="Subject",
        template=True  # Allow Jinja templating
    ),
    body: Parameter[str] = Parameter(
        label="Body",
        template=True
    ),
    input_data=None
):
    # Your implementation here
    return {**(input_data or {}), "email_sent": True}
```

### Defining Workflows

```python
from twiddle_dsl import workflow

@workflow(
    name="Customer Onboarding",
    description="Onboards new customers",
    version="1.0.0",
    # Temporal-specific
    task_queue="customer-onboarding",
    # Airflow-specific
    dag_id="customer_onboarding",
    schedule="@daily"
)
class CustomerOnboarding:
    async def run(self, input_data: dict) -> dict:
        # Orchestrate your activities here
        return {"status": "completed"}
```

## Features

- **`@activity`** - Decorator for defining activities with metadata
- **`@workflow`** - Decorator for defining workflows with metadata
- **`Parameter`** - Type hint wrapper for capturing UI metadata
- **`ActivityInput`** - Standard input dataclass for activities
- **`ExecutionLogger`** - Structured logging for waterfall visualization

## Platform Compatibility

| Feature | Temporal | Airflow |
|---------|----------|---------|
| Async activities | ✅ Required | ⚠️ Optional (experimental) |
| Sync activities | ❌ Not supported | ✅ Recommended |
| `task_queue` | ✅ Used | ➖ Ignored |
| `dag_id` | ➖ Ignored | ✅ Used |
| `schedule` | ➖ Ignored | ✅ Used |

## Compatibility

The DSL is designed to work with:
- Twiddle visual workflow editor
- Temporal Python SDK
- Apache Airflow
- Twiddle SDK CLI tools (`twiddle lint`, `twiddle convert`)

## License

Apache-2.0

